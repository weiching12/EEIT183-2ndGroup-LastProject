<!DOCTYPE html>
<html lang="zh-TW" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>遊戲道具交易後台</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" />

    <link rel="stylesheet" th:href="@{/css/dataTables.dataTables.css}" />
  </head>
  <body>
    <header class="container">
      <h1>遊戲道具交易後台</h1>
      <div id="gameList">
        <form id="myForm">
          <label for="SelectGame">遊戲選單:</label>
          <select id="SelectGame" name="gameId"></select>
          <button id="submitBtn">送出</button>
        </form>
        <div th:replace="~{prop/marketNavbar}"></div>
      </div>
    </header>
    <div class="container">
      <table id="myTable" class="display">
        <thead>
          <tr>
            <th>ID</th>
            <th>名稱</th>
            <th>圖片</th>
            <th>種類</th>
            <th>稀有度</th>
            <th>描述</th>
            <th>創建時間</th>
            <th>更新時間</th>
            <th>修改</th>
            <th>刪除</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const url = "http://localhost:8080/PlayCentric/prop/findAllGame";
        axios
          .get(url)
          .then(function (res) {
            const games = res.data;
            const selectGame = document.getElementById("SelectGame");
            games.forEach(function (game) {
              const option = document.createElement("option");
              option.value = game.gameId;
              option.text = game.gameName;
              selectGame.appendChild(option);
            });
          })
          .catch(function (error) {
            console.error("Error fetching game data:", error);
          });
      });

      const submitBtn = document.getElementById("submitBtn");
      submitBtn.addEventListener("click", (event) => {
        event.preventDefault(); // 取消 form 預設的送出
        const selectedGameId = document.getElementById("SelectGame").value;
        console.log("Selected Game ID:", selectedGameId);
        // 可以在此处添加后续处理逻辑，例如发送所选游戏ID到服务器
      });
    </script>

    <script th:src="@{/js/bootstrap.bundle.js}"></script>
    <script th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/js/dataTables.js}"></script>
    <script th:src="@{/js/axios.min.js}"></script>

    <script>
      $(document).ready(function () {
        $("#myTable").DataTable();
      });
    </script>
  </body>
</html>
